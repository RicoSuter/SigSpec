public class {{ Name }}HubClient {
    private readonly HubConnection _connection;
   
    public {{Name}}HubClient(HubConnection connection) {
        _connection = connection;
    }
{% for operation in Callbacks -%}
    public delegate Task On{{ operation.Name }}({% for parameter in operation.Parameters %}{{ parameter.Type }} {{ parameter.Name }}{% if forloop.last == false %}, {% endif %}{% endfor %});
{% if operation.Parameters.size == 0 %}
    public IDisposable RegisterFor{{ operation.Name }}(On{{ operation.Name }} callback)
    {
        return _connection.On("{{ operation.Name }}", callback.Invoke);
    }
    public IDisposable RegisterFor{{ operation.Name }}(Func<Task> callback)
    {
        return _connection.On("{{ operation.Name }}", callback);
    }
{% else %}
    public IDisposable RegisterFor{{ operation.Name }}(On{{ operation.Name }} callback)
    {
        return _connection.On<{% for parameter in operation.Parameters %}{{ parameter.Type }}{% if forloop.last == false %}, {% endif %}{% endfor %}>("{{ operation.Name }}", callback.Invoke);
    }
    public IDisposable RegisterFor{{ operation.Name }}(Func<{% for parameter in operation.Parameters %}{{ parameter.Type }}{% if forloop.last == false %}, {% endif %}{% endfor %}, Task> callback)
    {
        return _connection.On("{{ operation.Name }}", callback);
    }
{% endif %}
{% endfor -%}
}
